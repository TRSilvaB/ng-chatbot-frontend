<div #sidebar class="h-full flex-shrink-0 relative overflow-hidden"
[@sidebarState]="animationState"
(@sidebarState.start)="onAnimationEvent($event)"
(@sidebarState.done)="onAnimationEvent($event)"

[ngStyle]="{
    width: isOpen ? openWidth : '0px'
  }">

  <!-- Toggle Button -->
  <div class="absolute top-0 overflow-visible"
  [ngClass]="{
  '-right-8': position === 'left',
  '-left-8': position === 'right'
  }">
    <button class="h-8 w-8 p-2 flex items-center justify-center rounded shadow-md bg-primary text-black">
      <div (click)="toggle()" class="absolute w-full h-full"></div>
      <div [innerHTML]="toggleIcon"></div>
    </button>
  </div>

  <div class="w-full h-full border-border"
  [ngClass]="{
  'border-r': position === 'left',
  'border-l': position === 'right',
  'hidden': !isOpen && !isAnimating
  }">

    @if (isResizable) {
    <div #resizerContainer class="group absolute top-0 h-full w-1 z-50" [ngClass]="{
      'right-0': position === 'left',
      'left-0': position === 'right'
    }">
      <div #resizer
        class="absolute top-0 right-0 h-full w-full bg-accent cursor-col-resize opacity-0 group-hover:opacity-100 transition-opacity duration-200"
        [ngClass]="{
          'opacity-100': isResizing && !isAnimating
        }">
        
      </div>
    </div>
    }

    <!-- Sidebar Content -->
    <div class="h-full w-full flex-1 overflow-y-auto overflow-x-hidden whitespace-nowrap text-ellipsis">
      <ng-container [ngTemplateOutlet]="content"></ng-container>
    </div>

  </div>
</div>