<div class="{{ role === 'user' ? 'ml-auto flex-row-reverse max-w-[80%]' : 'mr-auto w-full' }} flex items-start my-2">
  <div
    class="relative flex items-start p-3 rounded-lg
      {{ role === 'user' ? 'bg-light-accent text-black dark:bg-gray-600 dark:text-white shadow-lg' : 'text-black dark:text-white w-full' }}"
  >
    <!-- Avatar or Default Icon for Assistant Only -->
    @if (role !== 'user') {
      <div class="flex-shrink-0 text-light-dark mr-4">
        @if (avatar) {
          <img
            [src]="avatar"
            alt="assistant avatar"
            class="w-8 h-8 rounded-full"
          />
        }
        @else {
          <!-- Assistant Default Icon -->
          <div class="w-8 h-8">
            <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="currentColor">
              <path d="M160-360q-50 0-85-35t-35-85q0-50 35-85t85-35v-80q0-33 23.5-56.5T240-760h120q0-50 35-85t85-35q50 0 85 35t35 85h120q33 0 56.5 23.5T800-680v80q50 0 85 35t35 85q0 50-35 85t-85 35v160q0 33-23.5 56.5T720-120H240q-33 0-56.5-23.5T160-200v-160Zm200-80q25 0 42.5-17.5T420-500q0-25-17.5-42.5T360-560q-25 0-42.5 17.5T300-500q0 25 17.5 42.5T360-440Zm240 0q25 0 42.5-17.5T660-500q0-25-17.5-42.5T600-560q-25 0-42.5 17.5T540-500q0 25 17.5 42.5T600-440ZM320-280h320v-80H320v80Zm-80 80h480v-480H240v480Zm240-240Z"/>
            </svg>
          </div>
        }
      </div>
    }

    <!-- Message Content -->
    <div class="flex-1 whitespace-pre-wrap {{ role === 'user' ? 'text-right' : 'ml-4' }}">
      {{ message }}
    </div>
  </div>
</div>
